<html>
    <head>
        <title>I Woke Up Like This!</title>

        <style type= "text/css">
            body {
                /*background-image: url("city1.gif");
                background-size:100% 100%;
*/
            } 
/*
            .pink {
                position:absolute; 
                TOP:600px; 
                LEFT:100px; 
                WIDTH:10px; 
                HEIGHT:10px
            }
*/
            </style>

        <script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
        <script type="text/processing" data-processing-target="mycanvas">
        var L = Math.random()*800 + 100;
        sW=1900;
        sL=800;

        var girlImage;
        var obstacles;
        var backLayer;
        var middleLayer;
        var frontLayer;

        void setup() {
            //you can put things like background or size (to set the dimensions of your frame)
            size(sW, sL);
            
            //(speed, red, green, blue, minWidth, maxWidth, minHeight, maxHeight)

            backLayer = new Layer(2,178, 224, 240, sW*0.03, sW*0.0575, sL*0.7, sL*0.955); //paremeters for the farthest layer
            backLayer.addBuilding();

            middleLayer = new Layer(3, 77, 184, 219, sW*0.06, sW*0.085, sL*0.68, sL*0.79);
            middleLayer.addBuilding();

            frontLayer = new Layer(4, 0, 138, 184, sW*0.0875, sW*0.1125, sL*0.3475, sL*0.475);
            frontLayer.addBuilding();

            obstacles = new Layer(7, 255, 25, 117, sW*0.0875, sW*0.0875, sL*0.1475, sL*0.175); //paramenters for the closest layer
            obstacles.addBuilding();

            player = new Player(100, 550, 300, 200);

            girlImage = loadImage("girlshy.jpg");
        }

        void draw() {
            //this is your draw loop i.e., the thing that loops over and over and over until the program is done
            background(204, 235, 245);

            backLayer.drawBuildings();
            backLayer.moveBuildings();

            middleLayer.drawBuildings();
            middleLayer.moveBuildings();

            frontLayer.drawBuildings();
            frontLayer.moveBuildings();

            // console.log("obstacles");
            obstacles.drawBuildings();
            obstacles.moveBlock();  

            player.draw();
            player.jump();
        }

        void keyPressed() {
            console.log(key);
            if (keyCode === UP) {
                // alert("up arrow pressed!");
                player.jumpState = 1;
            }
        }
        
        class Player {
            // Player class
            var r;
            var g;
            var b;
            var xposition;
            var yposition;
            var jumpState; // 0 if not jumping, 1 if going up, 2 if going down 
            var jumpHeight;
            var herwidth;//width of image
            var herheight;//height of image

            Player (x, y,girlheight, girlwidth){
                xposition = x;
                yposition = y;
                jumpState = 0;
                r = 100;
                g = 100;
                b = 100;
                jumpHeight = 300;
                herwidth = girlwidth;
                herheight = girlheight;
            }

            void draw() {
                image(girlImage, xposition, yposition, herwidth, herheight);
            }

            void jump() {
                // jumpstate = 0 if no jump
                // jumpstate = 1 if going up
                // jumpstate = 2 if going down

                if (jumpState === 1 && yposition >= jumpHeight) {
                    // if we haven't yet reached jump height (remember, y is opposite in processing! :))
                    yposition = yposition - 10;
                } 
                else if (jumpState === 1 && yposition < jumpHeight) {
                    // if we have reached the jump height
                    jumpState = 2; 
                }
                else if (jumpState === 2 && yposition < 600) {
                    // if we're falling and haven't reached the ground yet
                    yposition = yposition + 10;
                }
                else if (jumpState === 2 && yposition >= 600) {
                    // if we're falling and reached the ground
                    jumpState = 0; 
                }
            } // end of jump function 

        }

        class Building { // declare your variables here e.g., var speed
            var r; // color of the buildings
            var g;
            var b;
            var h; // how tall the building
            var w; //how fat the building
            var xposition; // x location
            var yposition; // y location

            Building (x, y, red, green, blue, width, height){ 
                // constructor  
                h = height; // its up there ^^^
                w = width; //^^
                r = red; //^^
                g = green;
                b = blue;
                xposition= x; // ^^
                yposition = y; //^^
                            
            }
            
            void drawBuilding(){
                console.log("drawing a building");
                fill(r,g,b);
                noStroke();
                rect(xposition, yposition, w, h); // draws this building at the current location
            }

            void drawBuilding2(){
                fill(r,g,b);
                noStroke();
                rect(100, 600, w, 200); // draws this building at the current location
            }
            
            void move(speed){// moves this building (you can add parameters)
                xposition = xposition - speed;
            }

    } // end of Building class   


        class Layer {// declare your variables here e.g. var speed;
            var s; //how fast the buildings go
            var r;
            var g;
            var b;  
            var minw;
            var maxw;
            var minh;
            var maxh;
            var width;
            var height;
            var buildings = [];

            Layer(speed, red, green, blue, minWidth, maxWidth, minHeight, maxHeight){ // constructor
                s = speed;
                r = red;
                g = green;
                b = blue;
                minw = minWidth;
                maxw = maxWidth;
                minh = minHeight;
                maxh = maxHeight;
            }

            void drawBuildings(){ // function for layer to draw the buildings this layer is responsible for
                for (var i = 0; i < buildings.length; i++) {
                    console.log(i);
                    buildings[i].drawBuilding();
                }
            }

            void drawBuildings2(){ // function for layer to draw the buildings this layer is responsible for
                // console.log("drawBuildings2");
                 for (var i = 0; i < buildings.length; i++) {
                     buildings[i].drawBuilding2();
                 }
             }

            void moveBuildings(){ // function to move the buildings that this layer is responsible for
                for (var j = 0; j < buildings.length; j++) {
                    buildings[j].move(s);
                }
                var lastbuilding = buildings.length - 1;
                if ((buildings[lastbuilding].xposition)+(buildings[lastbuilding].w-8)<sW){
                    addBuilding();
                }
            }
            
            void moveBlock(){ // function to move obstacle blocks (adds "buildings" when they reach the end of the screen, NOT one after another)
                for (var j = 0; j < buildings.length; j++) {
                    buildings[j].move(s);
                }
                var lastbuilding = buildings.length - 1;
                if ((buildings[lastbuilding].xposition)+(buildings[lastbuilding].w-8)<L){
                    addBuilding();
                }
            }
            
            void addBuilding(){
                // optional function to add a building to your lists
                width = random(minw, maxw);
                height = random(minh, maxh);
                buildings.push(new Building(sW, sL - height, r, g, b, width, height)); //adds the characteristics of the new building to the buidling list
            }

        } // end of Layer class

        </script>
        <script type="text/javascript">
  </script>
    </head>
    <body  background-image= "city1.gif">

        <!-- <p class = "pink" id= "girl">
            <img src="ladysign.PNG" width=95 style="position:absolute;left:200; top:675;" height="180" width="15"/><br>
            </p> -->
        <canvas id="mycanvas"></canvas>
    </body>
</html>
